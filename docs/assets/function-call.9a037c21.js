import{aZ as e,l as o,b2 as a,a_ as t,ag as s,b0 as n,d as l,f as r,a5 as i,a6 as c,aT as u,n as d,aa as v,b3 as p,b4 as f,b6 as m,F as y,a8 as h,a2 as g,aV as b,b1 as w}from"./vendor.cae3e354.js";import{e as C,n as k,t as S,d as x,C as O,D as z,p as I,c as B,E as P,q as L,F as T,w as A,G as j,m as E,H as D,I as X,k as Y,J as H,A as M,K as N}from"./index.b05a476a.js";import{c as F}from"./interceptor.8fc59063.js";import{L as R}from"./index.c867298c.js";function V(o){var a=e();a&&C(a.proxy,o)}var U={show:Boolean,zIndex:k,overlay:S,duration:k,teleport:[String,Object],lockScroll:S,lazyRender:S,beforeClose:Function,overlayStyle:Object,overlayClass:x,transitionAppear:Boolean,closeOnClickOverlay:S};function q(){var e=o(0),a=o(0),t=o(0),s=o(0),n=o(0),l=o(0),r=o(""),i=()=>{t.value=0,s.value=0,n.value=0,l.value=0,r.value=""};return{move:o=>{var i,c,u=o.touches[0];t.value=u.clientX<0?0:u.clientX-e.value,s.value=u.clientY-a.value,n.value=Math.abs(t.value),l.value=Math.abs(s.value),r.value||(r.value=(i=n.value,c=l.value,i>c&&i>10?"horizontal":c>i&&c>10?"vertical":""))},start:o=>{i(),e.value=o.touches[0].clientX,a.value=o.touches[0].clientY},reset:i,startX:e,startY:a,deltaX:t,deltaY:s,offsetX:n,offsetY:l,direction:r,isVertical:()=>"vertical"===r.value,isHorizontal:()=>"horizontal"===r.value}}var G=0;function J(e){var a=o(!1);return s(e,(e=>{e&&(a.value=e)}),{immediate:!0}),e=>()=>a.value?e():null}var K=Symbol();function Z(e){var o=n(K,null);o&&s(o,(o=>{o&&e()}))}var[$,_]=B("overlay"),Q=l({name:$,props:{show:Boolean,zIndex:k,duration:k,className:x,lockScroll:S,customStyle:Object},setup(e,o){var{slots:a}=o,t=J((()=>e.show)),s=e=>{I(e,!0)},n=t((()=>{var o=C(P(e.zIndex),e.customStyle);return L(e.duration)&&(o.animationDuration=e.duration+"s"),c(r("div",{style:o,class:[_(),e.className],onTouchmove:e.lockScroll?s:T},[null==a.default?void 0:a.default()]),[[u,e.show]])}));return()=>r(i,{name:"van-fade",appear:!0},{default:n})}}),W=A(Q),ee=C({},U,{round:Boolean,position:E("center"),closeIcon:E("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:E("top-right"),safeAreaInsetBottom:Boolean}),[oe,ae]=B("popup"),te=2e3,se=l({name:oe,inheritAttrs:!1,props:ee,emits:["open","close","opened","closed","update:show","click-overlay","click-close-icon"],setup(e,n){var l,g,b,w,C,k,S,x,B,{emit:P,attrs:T,slots:A}=n,E=o(),Y=o(),H=J((()=>e.show||!e.lazyRender)),M=d((()=>{var o={zIndex:E.value};L(e.duration)&&(o["center"===e.position?"animationDuration":"transitionDuration"]=e.duration+"s");return o})),N=()=>{l||(void 0!==e.zIndex&&(te=+e.zIndex),l=!0,E.value=++te,P("open"))},R=()=>{l&&F(e.beforeClose,{done(){l=!1,P("close"),P("update:show",!1)}})},U=o=>{P("click-overlay",o),e.closeOnClickOverlay&&R()},Z=()=>{if(e.overlay)return r(W,{show:e.show,class:e.overlayClass,zIndex:E.value,duration:e.duration,customStyle:e.overlayStyle,onClick:U},{default:A["overlay-content"]})},$=e=>{P("click-close-icon",e),R()},_=()=>{if(e.closeable)return r(X,{role:"button",tabindex:0,name:e.closeIcon,class:[ae("close-icon",e.closeIconPosition),D],classPrefix:e.iconPrefix,onClick:$},null)},Q=()=>P("opened"),ee=()=>P("closed"),oe=H((()=>{var{round:o,position:a,safeAreaInsetBottom:t}=e;return c(r("div",h({ref:Y,style:M.value,class:[ae({round:o,[a]:a}),{"van-safe-area-bottom":t}]},T),[null==A.default?void 0:A.default(),_()]),[[u,e.show]])})),se=()=>{var{position:o,transition:a,transitionAppear:t}=e;return r(i,{name:a||("center"===o?"van-fade":"van-popup-slide-"+o),appear:t,onAfterEnter:Q,onAfterLeave:ee},{default:oe})};return s((()=>e.show),(e=>{e?N():(l=!1,P("close"))})),V({popupRef:Y}),b=Y,w=()=>e.show&&e.lockScroll,C=q(),k=e=>{C.move(e);var o=C.deltaY.value>0?"10":"01",a=z(e.target,b.value),{scrollHeight:t,offsetHeight:s,scrollTop:n}=a,l="11";0===n?l=s>=t?"00":"01":n+s>=t&&(l="10"),"11"===l||!C.isVertical()||parseInt(l,2)&parseInt(o,2)||I(e,!0)},S=()=>{document.addEventListener("touchstart",C.start),document.addEventListener("touchmove",k,{passive:!1}),G||document.body.classList.add("van-overflow-hidden"),G++},x=()=>{G&&(document.removeEventListener("touchstart",C.start),document.removeEventListener("touchmove",k),--G||document.body.classList.remove("van-overflow-hidden"))},B=()=>w()&&x(),O((()=>w()&&S())),a(B),t(B),s(w,(e=>{e?S():x()})),j("popstate",(()=>{e.closeOnPopstate&&(R(),g=!1)})),v((()=>{e.show&&N()})),p((()=>{g&&(P("update:show",!0),g=!1)})),a((()=>{e.show&&(R(),g=!0)})),f(K,(()=>e.show)),()=>e.teleport?r(m,{to:e.teleport},{default:()=>[Z(),se()]}):r(y,null,[Z(),se()])}}),ne=A(se);var le=0;var[re,ie]=B("toast"),ce=["show","overlay","transition","overlayClass","overlayStyle","closeOnClickOverlay"],ue=l({name:re,props:{icon:String,show:Boolean,type:E("text"),overlay:Boolean,message:k,iconSize:k,duration:H(2e3),position:E("middle"),className:x,iconPrefix:String,transition:E("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:x,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean},emits:["update:show"],setup(e,o){var a,{emit:t}=o,n=!1,l=()=>{var o=e.show&&e.forbidClick;n!==o&&((n=o)?(le||document.body.classList.add("van-toast--unclickable"),le++):le&&(--le||document.body.classList.remove("van-toast--unclickable")))},i=e=>t("update:show",e),c=()=>{e.closeOnClick&&i(!1)},u=()=>clearTimeout(a),d=()=>{var{icon:o,type:a,iconSize:t,iconPrefix:s,loadingType:n}=e;return o||"success"===a||"fail"===a?r(X,{name:o||a,size:t,class:ie("icon"),classPrefix:s},null):"loading"===a?r(R,{class:ie("loading"),size:t,type:n},null):void 0},p=()=>{var{type:o,message:a}=e;if(L(a)&&""!==a)return"html"===o?r("div",{class:ie("text"),innerHTML:String(a)},null):r("div",{class:ie("text")},[a])};return s((()=>[e.show,e.forbidClick]),l),s((()=>[e.show,e.type,e.message,e.duration]),(()=>{u(),e.show&&e.duration>0&&(a=setTimeout((()=>{i(!1)}),e.duration))})),v(l),w(l),()=>r(ne,h({class:[ie([e.position,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:c,onClosed:u,"onUpdate:show":i},Y(e,ce)),{default:()=>[d(),p()]})}}),de={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1},ve=[],pe=!1,fe=C({},de),me=new Map;function ye(e){return N(e)?e:{message:e}}function he(){var a,t,{instance:n,unmount:l}=(a=g({setup(){var a=o(""),{open:t,state:i,close:c,toggle:u}=function(){var e=b({show:!1}),o=o=>{e.show=o},a=a=>{C(e,a,{transitionAppear:!0}),o(!0)},t=()=>o(!1);return V({open:a,close:t,toggle:o}),{open:a,close:t,state:e,toggle:o}}(),d=()=>{pe&&(ve=ve.filter((e=>e!==n)),l())};return s(a,(e=>{i.message=e})),e().render=()=>r(ue,h(i,{onClosed:d,"onUpdate:show":u}),null),{open:t,clear:c,message:a}}}),t=document.createElement("div"),document.body.appendChild(t),{instance:a.mount(t),unmount(){a.unmount(),document.body.removeChild(t)}});return n}function ge(e){if(void 0===e&&(e={}),!M)return{};var o=function(){if(!ve.length||pe){var e=he();ve.push(e)}return ve[ve.length-1]}(),a=ye(e);return o.open(C({},fe,me.get(a.type||fe.type),a)),o}var be=e=>o=>ge(C({type:e},ye(o)));ge.loading=be("loading"),ge.success=be("success"),ge.fail=be("fail"),ge.clear=e=>{if(ve.length)if(e)ve.forEach((e=>{e.clear()})),ve=[];else if(pe){var o;null==(o=ve.shift())||o.clear()}else ve[0].clear()},ge.setDefaultOptions=function(e,o){"string"==typeof e?me.set(e,o):C(fe,e)},ge.resetDefaultOptions=e=>{"string"==typeof e?me.delete(e):(fe=C({},de),me.clear())},ge.allowMultiple=function(e){void 0===e&&(e=!0),pe=e},ge.install=e=>{e.use(A(ue)),e.config.globalProperties.$toast=ge};export{ne as P,ge as T,q as a,Z as o,V as u};
