var e=Object.defineProperty,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,n=(a,r,l)=>r in a?e(a,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[r]=l;import{a as t}from"./index.9bc79dd0.js";import{ax as o,l as u,n as s,L as c,aL as v,M as i}from"./vendor.e60456f3.js";function p(e,...p){let d={},m={};0===p.length?d={}:1===p.length?["immediate","resetOnRequest","onError"].some((e=>Object.prototype.hasOwnProperty.call(p[0],e)))?m=p[0]:d=p[0]:p.length>1&&(d=p[0],m=p[1]);const{immediate:b=!1,resetOnRequest:f=!1,onSuccess:y,onError:O}=m,g=o(e),h=u(!1),j=u(!1),w=u(!1),P=u(null),q=u(),k=s((()=>j.value&&!P.value)),x=s((()=>{const e=c(P);return v(e)?e:null==e?void 0:e.message}));let E;const S=async o=>{const u=o?i({},c(d),c(o)):c(d);f&&(g.value=e,q.value=void 0),E=t.CancelToken.source(),h.value=!0,j.value=!1,P.value=null;const s=t.request(((e,t)=>{for(var o in t||(t={}))r.call(t,o)&&n(e,o,t[o]);if(a)for(var o of a(t))l.call(t,o)&&n(e,o,t[o]);return e})({cancelToken:E.token},u));try{return q.value=await s,g.value=q.value.data,E=null,h.value=!1,j.value=!0,y&&y(g.value,q.value),g.value}catch(v){console.error(v),P.value=v,h.value=!1,j.value=!0,t.isCancel(v)||(E=null,O&&O(v))}};return b&&S(),{isPending:h,isFinished:j,isSuccessful:k,error:P,errorMessage:x,data:g,response:q,request:S,cancel:e=>{j.value||E&&(E.cancel(e),w.value=!0,h.value=!1,j.value=!1)}}}export{p as u};
