var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,o=(e,t)=>{for(var a in t||(t={}))i.call(t,a)&&r(e,a,t[a]);if(l)for(var a of l(t))s.call(t,a)&&r(e,a,t[a]);return e},u=(e,l)=>t(e,a(l));import{d as n,l as v,aV as c,n as p,ag as f,aa as d,b3 as w,b2 as h,a_ as m,f as g,aU as b,be as y,o as x,a as k,e as j,a8 as C,L as O,b8 as z,c as I,a4 as P,bf as _,bg as M,bh as T,bi as S,w as Y,t as A,b as B,F as X,r as D,a7 as E,g as L}from"./vendor.cae3e354.js";import{B as q}from"./index.c867298c.js";import{_ as R}from"./GoToCartButton.09c1fb8c.js";import{I as V,u as $,S as F}from"./cart.ece30a59.js";import{f as G,Y as H,Z as U,_ as W,c as Z,t as J,n as K,l as N,$ as Q,P as ee,p as te,z as ae,w as le,j as ie}from"./index.b05a476a.js";import{a as se,u as re,o as oe,T as ue}from"./function-call.9a037c21.js";import{a as ne}from"./product.e58922dc.js";import"./index.4a907a91.js";import"./useAxios.7bef570f.js";import"./interceptor.8fc59063.js";import"./usePaginatedList.72bbe226.js";var[ve,ce]=Z("swipe"),pe={loop:J,width:K,height:K,vertical:Boolean,autoplay:N(0),duration:N(500),touchable:J,lazyRender:Boolean,initialSwipe:N(0),indicatorColor:String,showIndicators:J,stopPropagation:J},fe=Symbol(ve),de=le(n({name:ve,props:pe,emits:["change"],setup(e,t){var a,l,{emit:i,slots:s}=t,r=v(),o=c({rect:null,width:0,height:0,offset:0,active:0,swiping:!1}),u=se(),{children:n,linkChildren:b}=G(fe),y=p((()=>n.length)),x=p((()=>o[e.vertical?"height":"width"])),k=p((()=>e.vertical?u.deltaY.value:u.deltaX.value)),j=p((()=>o.rect?(e.vertical?o.rect.height:o.rect.width)-x.value*y.value:0)),C=p((()=>Math.ceil(Math.abs(j.value)/x.value))),O=p((()=>y.value*x.value)),z=p((()=>(o.active+y.value)%y.value)),I=p((()=>{var t=e.vertical?"vertical":"horizontal";return u.direction.value===t})),P=p((()=>{var t={transitionDuration:(o.swiping?0:e.duration)+"ms",transform:"translate"+(e.vertical?"Y":"X")+"("+o.offset+"px)"};if(x.value){var a=e.vertical?"height":"width",l=e.vertical?"width":"height";t[a]=O.value+"px",t[l]=e[l]?e[l]+"px":""}return t})),_=function(t,a){void 0===a&&(a=0);var l=t*x.value;e.loop||(l=Math.min(l,-j.value));var i=a-l;return e.loop||(i=ae(i,j.value,0)),i},M=t=>{var{pace:a=0,offset:l=0,emitChange:s}=t;if(!(y.value<=1)){var{active:r}=o,u=(t=>{var{active:a}=o;return t?e.loop?ae(a+t,-1,y.value):ae(a+t,0,C.value):a})(a),v=_(u,l);if(e.loop){if(n[0]&&v!==j.value){var c=v<j.value;n[0].setOffset(c?O.value:0)}if(n[y.value-1]&&0!==v){var p=v>0;n[y.value-1].setOffset(p?-O.value:0)}}o.active=u,o.offset=v,s&&u!==r&&i("change",z.value)}},T=()=>{o.swiping=!0,o.active<=-1?M({pace:y.value}):o.active>=y.value&&M({pace:-y.value})},S=()=>{T(),u.reset(),Q((()=>{o.swiping=!1,M({pace:1,emitChange:!0})}))},Y=()=>clearTimeout(a),A=()=>{Y(),e.autoplay>0&&y.value>1&&(a=setTimeout((()=>{S(),A()}),+e.autoplay))},B=function(t){if(void 0===t&&(t=+e.initialSwipe),r.value){if(!ee(r)){var a,l,i={width:r.value.offsetWidth,height:r.value.offsetHeight};o.rect=i,o.width=+(null!=(a=e.width)?a:i.width),o.height=+(null!=(l=e.height)?l:i.height)}y.value&&(t=Math.min(y.value-1,t)),o.active=t,o.swiping=!0,o.offset=_(t),n.forEach((e=>{e.setOffset(0)})),A()}},X=()=>B(o.active),D=t=>{e.touchable&&(u.start(t),l=Date.now(),Y(),T())},E=t=>{e.touchable&&o.swiping&&(u.move(t),(I.value||u.offsetY.value>u.offsetX.value===e.vertical)&&te(t,e.stopPropagation),I.value&&M({offset:k.value}))},L=()=>{if(e.touchable&&o.swiping){var t=Date.now()-l,a=k.value/t;if((Math.abs(a)>.25||Math.abs(k.value)>x.value/2)&&I.value){var i=e.vertical?u.offsetY.value:u.offsetX.value,s=0;s=e.loop?i>0?k.value>0?-1:1:0:-Math[k.value>0?"ceil":"floor"](k.value/x.value),M({pace:s,emitChange:!0})}else k.value&&M({pace:0});o.swiping=!1,A()}},q=(t,a)=>{var l=a===z.value,i=l?{backgroundColor:e.indicatorColor}:void 0;return g("i",{style:i,class:ce("indicator",{active:l})},null)};return re({prev:()=>{T(),u.reset(),Q((()=>{o.swiping=!1,M({pace:-1,emitChange:!0})}))},next:S,state:o,resize:X,swipeTo:function(t,a){void 0===a&&(a={}),T(),u.reset(),Q((()=>{var l;l=e.loop&&t===y.value?0===o.active?0:t:t%y.value,a.immediate?Q((()=>{o.swiping=!1})):o.swiping=!1,M({pace:l-o.active,emitChange:!0})}))}}),b({size:x,props:e,count:y,activeIndicator:z}),f((()=>e.initialSwipe),(e=>B(+e))),f(y,(()=>B(o.active))),f((()=>e.autoplay),A),f([H,U],X),f(W(),(e=>{"visible"===e?A():Y()})),d(B),w((()=>B(o.active))),oe((()=>B(o.active))),h(Y),m(Y),()=>g("div",{ref:r,class:ce()},[g("div",{style:P.value,class:ce("track",{vertical:e.vertical}),onTouchstart:D,onTouchmove:E,onTouchend:L,onTouchcancel:L},[null==s.default?void 0:s.default()]),s.indicator?s.indicator({active:z.value}):e.showIndicators&&y.value>1?g("div",{class:ce("indicators",{vertical:e.vertical})},[Array(y.value).fill("").map(q)]):void 0])}})),[we,he]=Z("swipe-item"),me=le(n({name:we,setup(e,t){var a,{slots:l}=t,i=c({offset:0,inited:!1,mounted:!1}),{parent:s,index:r}=ie(fe);if(s){var o=p((()=>{var e={},{vertical:t}=s.props;return s.size.value&&(e[t?"height":"width"]=s.size.value+"px"),i.offset&&(e.transform="translate"+(t?"Y":"X")+"("+i.offset+"px)"),e})),u=p((()=>{var{loop:e,lazyRender:t}=s.props;if(!t||a)return!0;if(!i.mounted)return!1;var l=s.activeIndicator.value,o=s.count.value-1,u=0===l&&e?o:l-1,n=l===o&&e?0:l+1;return a=r.value===l||r.value===u||r.value===n}));return d((()=>{b((()=>{i.mounted=!0}))})),re({setOffset:e=>{i.offset=e}}),()=>g("div",{class:he(),style:o.value},[u.value?null==l.default?void 0:l.default():null])}}}));const ge=["onClick"],be={key:1,class:"tw-absolute tw-inset-0 tw-bg-white/25 tw-flex tw-items-center tw-justify-center"},ye=n({inheritAttrs:!1}),xe=n(u(o({},ye),{props:{url:null,active:{type:Boolean,default:!1},wrapperClass:{default:""}},setup(e){const t=e,a=v(),{playing:l,muted:i,onSourceError:s}=y(a,{src:t.url}),r=v(!1);s((()=>{r.value=!0}));const o=()=>{r.value||(l.value=!l.value)},u=()=>{i.value=!i.value};return d((()=>{i.value=!0,f((()=>t.active),(e=>{l.value=e}))})),(t,s)=>{const n=_,v=M,c=T,p=S;return x(),k("div",{class:P(["tw-relative tw-text-white",e.wrapperClass]),onClick:o},[j("video",C({ref_key:"video",ref:a,class:"tw-w-full tw-h-full tw-bg-slate-300","object-fit":"cover"},t.$attrs),null,16),O(l)?(x(),k("a",{key:0,class:"tw-absolute tw-right-2 tw-bottom-2",onClick:z(u,["prevent","stop"])},[O(i)?(x(),I(n,{key:0,size:"18"})):(x(),I(v,{key:1,size:"18"}))],8,ge)):(x(),k("div",be,[r.value?(x(),I(c,{key:0,size:"32"})):(x(),I(p,{key:1,size:"32"}))]))],2)}}})),ke={class:"tw-absolute tw-px-2 tw-left-1/2 tw--translate-x-1/2 tw-bottom-2 tw-text-sm tw-text-white tw-text-center"},je={key:1,class:"tw-w-full tw-h-[320px] tw-bg-light"},Ce=n({props:{items:{default:()=>[]}},setup(e){const t=e,a=v(0),l=e=>{a.value=e},i=p((()=>t.items.slice(0,9))),s=p((()=>i.value.length));return(t,r)=>{const o=xe,u=V,n=me,v=de;return e.items.length?(x(),I(v,{key:0,onChange:l},{indicator:Y((({active:e})=>[j("div",ke,A(e+1)+"/"+A(O(s)),1)])),default:Y((()=>[(x(!0),k(X,null,B(O(i),((e,t)=>(x(),I(n,{key:e.url},{default:Y((()=>[e.isVideo?(x(),I(o,{key:0,"wrapper-class":"tw-w-full tw-h-[320px]",url:e.url,active:a.value===t,crossorigin:"anonymous"},null,8,["url","active"])):(x(),I(u,{key:1,class:"tw-w-full tw-h-[320px]",src:e.url,fit:"cover"},null,8,["src"]))])),_:2},1024)))),128))])),_:1})):(x(),k("div",je))}}});var Oe={};const ze={class:"tw-h-full tw-relative tw-bg-white tw-pb-[56px]"},Ie={class:"tw-article tw-leading-normal"},Pe={class:"tw-space-y-3"},_e={class:"tw-text-primary tw-text-lg tw-font-bold"},Me=j("span",{class:"tw-ml-1 tw-text-primary tw-text-xs"},"元/月",-1),Te={class:"tw-font-bold"},Se={class:"tw-text-medium tw-text-sm"},Ye={class:"tw-h-[56px] tw-leading-[px] tw-flex tw-items-center tw-px-4 tw-fixed tw-bottom-0 tw-left-0 tw-right-0 tw-shadow tw-shadow-primary tw-bg-white"},Ae=L(" 加入购物车 "),Be=L(" 立刻购买 "),Xe=n({props:{id:null},setup(e){const t=e,{data:a,isPending:l,errorMessage:i,request:s}=ne();f((()=>i.value),(e=>{ue.fail(e)})),s(t.id);const r=$();f((()=>r.itemAddingErrorMessage),(e=>{e&&ue(e)}));const n=()=>{r.addItem(u(o({},a.value),{quantity:1}))};return(e,t)=>{const i=Ce,s=F,o=V,u=R,v=q,c=D("router-link");return x(),k("article",ze,[g(i,{items:O(a).bannerImageList},null,8,["items"]),j("div",Ie,[g(s,{title:"",avatar:"",row:3,loading:O(l)},{default:Y((()=>[j("div",Pe,[j("p",null,[j("span",_e,A(O(a).price),1),Me]),j("p",Te,A(O(a).title),1),j("p",Se,A(O(a).body),1)])])),_:1},8,["loading"])]),O(a).detailImage?(x(),I(o,{key:0,class:"tw-w-full",fit:"cover",src:O(a).detailImage},null,8,["src"])):E("",!0),j("footer",Ye,[g(u),g(v,{class:"!tw-ml-auto",color:"var(--color-secondary)",round:"",disabled:O(r).isItemAdding,onClick:n},{default:Y((()=>[Ae])),_:1},8,["disabled"]),g(c,{to:"/mobile/order"},{default:Y((()=>[g(v,{class:"!tw-ml-3",type:"primary",round:""},{default:Y((()=>[Be])),_:1})])),_:1})])])}}});"function"==typeof Oe&&Oe(Xe);export{Xe as default};
