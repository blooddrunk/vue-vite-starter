var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,l=(e,t)=>{for(var a in t||(t={}))s.call(t,a)&&i(e,a,t[a]);if(r)for(var a of r(t))n.call(t,a)&&i(e,a,t[a]);return e},o=(e,r)=>t(e,a(r));import{ax as u,l as d,n as c,p as m,ay as p,d as f,o as b,c as v,w as y,L as w,aq as _,az as g,E as P,aA as h,aB as x,ar as E,as as S,f as O,a as T,b as $,a8 as q,F as A,aC as j,aD as L,at as V,aE as I,aF as R,aG as D,ac as k,e as F,g as N,aj as z,aH as B,aI as H,aJ as J,a6 as C,aK as G}from"./vendor.69be2e31.js";import{a as U,_ as K}from"./BaseInput.da3287ba.js";import{_ as M}from"./index.28ecbabf.js";import{u as W,a as Q}from"./useAxios.cbde3152.js";import"./useFormField.813591f3.js";const X=f({props:{action:null,confirmText:{default:""},size:{default:"mini"},type:{default:"text"},plain:{type:Boolean,default:!1}},setup(e){const t=e,{isPending:a,execute:r}=((e,t,a={})=>{const r=u(t),s=d(!1),n=d(!1),i=d(null),l=c((()=>n.value&&!i.value)),{immediate:o=!0,onError:f=p,resetOnExecute:b=!0,delay:v=0}=a,y=async(a=0,...l)=>{b&&(r.value=t),s.value=!0,n.value=!1,i.value=null,a>0&&await m(a);const o="function"==typeof e?e(...l):e;try{const e=await o;return r.value=e,e}catch(u){console.error(u),i.value=u,f(u)}finally{s.value=!1,n.value=!0}};return o&&y(v),{isPending:s,isFinished:n,isSuccessful:l,error:i,data:r,execute:y}})(t.action,null,{immediate:!1}),s=async()=>{if(t.confirmText)try{await g.confirm(t.confirmText,"提示",{type:"warning"}),r()}catch(e){}else r()};return(t,r)=>{const n=P;return b(),v(n,{loading:w(a),disabled:w(a),size:e.size,type:e.type,plain:e.plain,onClick:s},{default:y((()=>[w(a)?_(t.$slots,"loading",{key:0}):_(t.$slots,"default",{key:1})])),_:3},8,["loading","disabled","size","type","plain"])}}}),Y=f({inheritAttrs:!1}),Z=f(o(l({},Y),{props:{items:null},setup(e){const t=e;return(e,a)=>{const r=h,s=x,n=U;return b(),v(n,E(S(e.$attrs)),{default:y((e=>[O(s,E(S(e)),{default:y((()=>[(b(!0),T(A,null,$(t.items,(e=>(b(),v(r,q({key:e.value},e),null,16)))),128))])),_:2},1040)])),_:1},16)}}})),ee=f({inheritAttrs:!1}),te=f(o(l({},ee),{props:{items:null},setup(e){const t=e;return(e,a)=>{const r=j,s=L,n=U;return b(),v(n,E(S(e.$attrs)),{default:y((e=>[O(s,E(S(e)),{default:y((()=>[(b(!0),T(A,null,$(t.items,(e=>(b(),v(r,q({key:e.value},e),null,16)))),128))])),_:2},1040)])),_:1},16)}}}));var ae=M(f({inheritAttrs:!1}),[["render",function(e,t,a,r,s,n){const i=I,l=U;return b(),v(l,E(S(e.$attrs)),{default:y((t=>[O(i,E(S(t)),V({_:2},[$(e.$slots,((t,a)=>({name:a,fn:y((()=>[_(e.$slots,a)]))})))]),1040)])),_:3},16)}]]);const re=f({inheritAttrs:!1}),se=f(o(l({},re),{setup:e=>(e,t)=>{const a=R,i=U;return b(),v(i,E(S(e.$attrs)),{default:y((t=>{var i=t,{modelValue:l}=i,o=((e,t)=>{var a={};for(var i in e)s.call(e,i)&&t.indexOf(i)<0&&(a[i]=e[i]);if(null!=e&&r)for(var i of r(e))t.indexOf(i)<0&&n.call(e,i)&&(a[i]=e[i]);return a})(i,["modelValue"]);return[O(a,q({"model-value":w(D)(l)},o),V({_:2},[$(e.$slots,((t,a)=>({name:a,fn:y((()=>[_(e.$slots,a)]))})))]),1040,["model-value"])]})),_:3},16)}})),ne=f({name:"ProductForm",props:{addProduct:{type:Function,required:!0}},emits:{submit:null},setup(e){const{meta:t,isSubmitting:a,handleSubmit:r,resetForm:s}=k({validationSchema:{name:"required|min:5|max:10",price:"required|numeric|min_value:1|max_value:9999999",inventory:"required",terms:"required",tags:"required",location:"required"},initialValues:{name:"233",price:1,inventory:1,terms:!1,tags:["book"],location:""}}),n=c((()=>!t.value.valid&&t.value.dirty)),i=r((async t=>{await e.addProduct(t)}));return{tagList:d([{label:"Phone",value:"phone"},{label:"Book",value:"book"}]),locationList:d([{label:"UP",value:"up"},{label:"DOWN",value:"down"}]),invalid:n,isSubmitting:a,onSubmit:i,onReset:e=>{e.preventDefault(),s()}}}}),ie={class:"tw-max-w-lg tw-p-3 tw-shadow-md"},le=F("h1",{class:"tw-py-2 tw-text-semibold tw-text-xl tw"},"Enter Product",-1),oe=F("span",{class:"tw-text-teal-600"},"Product Name",-1),ue=F("span",{class:"tw-text-blue-600"},"Price",-1),de=N(" $ "),ce=N("1` "),me=N(" Agree to terms and conditions "),pe={class:"tw-flex tw-justify-end tw-py-3"},fe=N("RESET"),be=N(" SUBMIT ");var ve=M(ne,[["render",function(e,t,a,r,s,n){const i=K,l=se,o=ae,u=te,d=Z,c=P,m=z;return b(),T("div",ie,[le,O(m,{"status-icon":"",onSubmit:e.onSubmit,onReset:e.onReset},{default:y((()=>[O(i,{name:"name",label:"Product Name",required:""},{label:y((()=>[oe])),_:1}),O(i,{name:"price",label:"Price",required:""},{label:y((()=>[ue])),prepend:y((()=>[de])),_:1}),O(l,{class:"tw-w-full",name:"inventory",label:"Inventory",required:"","controls-position":"right",min:0,max:9999,precision:0},{default:y((()=>[ce])),_:1}),O(o,{name:"terms",label:"Terms","show-label":!1,required:""},{default:y((()=>[me])),_:1}),O(u,{name:"tags",label:"Tags",items:e.tagList},null,8,["items"]),O(d,{name:"location",label:"Location",items:e.locationList,clearable:"",placeholder:"Location"},null,8,["items"]),F("div",pe,[O(c,{"native-type":"reset"},{default:y((()=>[fe])),_:1}),O(c,{type:"primary","native-type":"submit",loading:e.isSubmitting,disabled:e.invalid||e.isSubmitting},{default:y((()=>[be])),_:1},8,["loading","disabled"])])])),_:1},8,["onSubmit","onReset"])])}]]),ye={};const we=f({name:"SimpleFormView",setup(){const{products:e,isProductLoading:t,addProduct:a,removeProduct:r}=(()=>{const{data:e,isPending:t,request:a}=W({url:`${{}.VITE_JSON_SERVER_PATH}products`,__needValidation:!1},[],{immediate:!0});return{products:e,isProductLoading:t,addProduct:async t=>{try{const{data:a}=await Q.request({url:`${{}.VITE_JSON_SERVER_PATH}products`,method:"post",data:t,__needValidation:!1});console.log(a),e.value.unshift(a)}catch(a){console.error(a),G.error(a.message)}},removeProduct:async t=>{if(t.id)try{await Q.delete(`${{}.VITE_JSON_SERVER_PATH}products/${t.id}`,{__needValidation:!1}),e.value=e.value.filter((e=>e.id!==t.id))}catch(a){console.error(a),G.error(a.message)}},fetchProducts:a}})();return{products:e,isProductLoading:t,addProduct:a,getDeleteAction:e=>async()=>{await r(e),G.success("Deleted successfully")}}}}),_e=N(" DELETE "),ge=N(" DELETING... ");"function"==typeof ye&&ye(we);var Pe=M(we,[["render",function(e,t,a,r,s,n){const i=ve,l=B,o=X,u=H,d=J;return b(),T("section",null,[O(i,{"add-product":e.addProduct},null,8,["add-product"]),C((b(),v(u,{class:"tw-mt-3",data:e.products,"row-key":"id"},{default:y((()=>[O(l,{prop:"id",label:"ID",width:"100"}),O(l,{prop:"name",label:"Product Name"}),O(l,{prop:"price",label:"Product Price",width:"200"}),O(l,{prop:"inventory",label:"Inventory",width:"100"}),O(l,{label:"Action",width:"200"},{default:y((t=>[O(o,{type:"danger",action:e.getDeleteAction(t.row),"confirm-text":"Are you sure?"},{loading:y((()=>[ge])),default:y((()=>[_e])),_:2},1032,["action"])])),_:1})])),_:1},8,["data"])),[[d,e.isProductLoading]])])}]]);export{Pe as default};
