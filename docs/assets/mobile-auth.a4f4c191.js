var e=Object.defineProperty,r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(r,a,o)=>a in r?e(r,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[a]=o,u=(e,u)=>{for(var t in u||(u={}))a.call(u,t)&&l(e,t,u[t]);if(r)for(var t of r(u))o.call(u,t)&&l(e,t,u[t]);return e};import{k as t,l as s,m as n,n as i,p as v}from"./vendor.cae3e354.js";const b=t("mobile-auth",(()=>{const e=s({user:n("hsop_auth_mobile_user",{mobile:"13312331233",area:"310102"})}),r=i((()=>e.value.user)),a=i((()=>r.value.mobile)),o=i((()=>r.value.area)),l=i((()=>!!a.value)),t=s(!1),b=s(""),c=i((()=>!!b.value)),m=r=>{e.value.user=u(u({},e.value.user),r)};return{user:r,mobile:a,area:o,isLoggedIn:l,loginError:b,hasLoginError:c,isLoginPending:t,updateUser:m,login:async e=>{t.value=!0,b.value="";try{if(await v(1e3),"123456"!==e.authCode)throw new Error("wrong auth info");m({mobile:e.mobile})}catch(r){console.error(r),b.value=r.message}finally{t.value=!1}},logout:()=>{e.value.user={},b.value=""}}}));export{b as u};
