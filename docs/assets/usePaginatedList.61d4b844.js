var e=Object.defineProperty,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(a,t,r)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r,l=(e,l)=>{for(var i in l||(l={}))t.call(l,i)&&o(e,i,l[i]);if(a)for(var i of a(l))r.call(l,i)&&o(e,i,l[i]);return e};import{t as i}from"./index.ab5ea04f.js";import{u as s}from"./useAxios.8bd7f2aa.js";import{aR as n,l as u,n as g,ag as p,aS as v,L as m,M as P}from"./vendor.a4ef30fa.js";const d={page:1,rowsPerPage:20},f={page:"page",rowsPerPage:"rowsPerPage"},c=e=>({items:(null==e?void 0:e.items)||[],total:(null==e?void 0:e.total)||0}),b=(e,{filter:a={},paginationToQuery:t=f,initialItems:r=[],initialTotal:o=0,initialPagination:b=d})=>{const w=u(a),y=u({}),h=u(b),j=g((()=>0===O.value.length)),L=g((()=>l({page:1},h.value))),O=g((()=>{var e,a;return null!=(a=null==(e=I.value)?void 0:e.items)?a:[]})),x=g((()=>{var e,a;return null!=(a=null==(e=I.value)?void 0:e.total)?a:0})),M=g((()=>{var e;return x.value?Math.ceil(x.value/(null!=(e=L.value.rowsPerPage)?e:1)):1})),A=g((()=>1===L.value.page)),E=g((()=>L.value.page===M.value)),R=l(l({},f),t),T=l({__transformData:c},e),q=e=>{h.value=l(l({},h.value),e)},F=e=>{var a;const t=m(L),r={};r[R.page]=t.page,r[R.rowsPerPage]=t.rowsPerPage;const o=l(l({},i(m(y))),r),s=P({},T,e),n="get"===(null!=(a=null==s?void 0:s.method)?a:"get").toLowerCase()?{params:o}:{data:o};return l(l({},s),n)},{data:I,isPending:S,errorMessage:_,request:k}=s(F(),{items:r,total:o},{immediate:!1,resetOnRequest:!1});p(I,(e=>{if(!e||!e.items)throw new Error("[fetchList] expects response data to be an object with 'items' and 'total'(optional) as keys, do you forget to define a proper data transformer?")}));const C=e=>(y.value=v(m(w)),k(F(e)));p(h,(()=>{C()}));const D=g((()=>({items:O.value,total:x.value,loading:S.value,pagination:h.value,updatePagination:q})));return{errorMessage:_,filter:w,lastAppliedFilter:n(y),items:O,total:x,isPending:S,pagination:h,isListEmpty:j,lastPage:M,isFirstPage:A,isLastPage:E,elementTableProps:D,updatePagination:q,resetPagination:()=>{q({page:1})},nextPage:()=>{E.value||q({page:L.value.page+1})},fetchList:C,fetchListAndReset:e=>(h.value.page=1,C(e))}};export{b as u};
