var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l;import{d as o,l as u,aV as v,n,ag as c,aa as p,b1 as f,a$ as h,b0 as d,f as w,aX as g,be as m,o as b,a as y,e as x,a8 as k,L as C,ba as O,c as j,a4 as z,bf as M,bg as P,bh as S,bi as T,w as I,t as X,b as Y,F as B}from"./vendor.e60456f3.js";import{I as D}from"./index.aa76e96d.js";import{q as _,a0 as E,a1 as A,a2 as R,c as V,t as $,n as q,l as F,a3 as H,Z as L,p as W,B as Z,w as G,h as J}from"./index.84f5d824.js";import{a as K,u as N,o as Q}from"./on-popup-reopen.d93741ed.js";var[U,ee]=V("swipe"),ae={loop:$,width:q,height:q,vertical:Boolean,autoplay:F(0),duration:F(500),touchable:$,lazyRender:Boolean,initialSwipe:F(0),indicatorColor:String,showIndicators:$,stopPropagation:$},te=Symbol(U),le=G(o({name:U,props:ae,emits:["change"],setup(e,a){var t,l,{emit:i,slots:s}=a,r=u(),o=v({rect:null,width:0,height:0,offset:0,active:0,swiping:!1}),g=K(),{children:m,linkChildren:b}=_(te),y=n((()=>m.length)),x=n((()=>o[e.vertical?"height":"width"])),k=n((()=>e.vertical?g.deltaY.value:g.deltaX.value)),C=n((()=>o.rect?(e.vertical?o.rect.height:o.rect.width)-x.value*y.value:0)),O=n((()=>Math.ceil(Math.abs(C.value)/x.value))),j=n((()=>y.value*x.value)),z=n((()=>(o.active+y.value)%y.value)),M=n((()=>{var a=e.vertical?"vertical":"horizontal";return g.direction.value===a})),P=n((()=>{var a={transitionDuration:(o.swiping?0:e.duration)+"ms",transform:"translate"+(e.vertical?"Y":"X")+"("+o.offset+"px)"};if(x.value){var t=e.vertical?"height":"width",l=e.vertical?"width":"height";a[t]=j.value+"px",a[l]=e[l]?e[l]+"px":""}return a})),S=function(a,t){void 0===t&&(t=0);var l=a*x.value;e.loop||(l=Math.min(l,-C.value));var i=t-l;return e.loop||(i=Z(i,C.value,0)),i},T=a=>{var{pace:t=0,offset:l=0,emitChange:s}=a;if(!(y.value<=1)){var{active:r}=o,u=(a=>{var{active:t}=o;return a?e.loop?Z(t+a,-1,y.value):Z(t+a,0,O.value):t})(t),v=S(u,l);if(e.loop){if(m[0]&&v!==C.value){var n=v<C.value;m[0].setOffset(n?j.value:0)}if(m[y.value-1]&&0!==v){var c=v>0;m[y.value-1].setOffset(c?-j.value:0)}}o.active=u,o.offset=v,s&&u!==r&&i("change",z.value)}},I=()=>{o.swiping=!0,o.active<=-1?T({pace:y.value}):o.active>=y.value&&T({pace:-y.value})},X=()=>{I(),g.reset(),H((()=>{o.swiping=!1,T({pace:1,emitChange:!0})}))},Y=()=>clearTimeout(t),B=()=>{Y(),e.autoplay>0&&y.value>1&&(t=setTimeout((()=>{X(),B()}),+e.autoplay))},D=function(a){if(void 0===a&&(a=+e.initialSwipe),r.value){if(!L(r)){var t,l,i={width:r.value.offsetWidth,height:r.value.offsetHeight};o.rect=i,o.width=+(null!=(t=e.width)?t:i.width),o.height=+(null!=(l=e.height)?l:i.height)}y.value&&(a=Math.min(y.value-1,a)),o.active=a,o.swiping=!0,o.offset=S(a),m.forEach((e=>{e.setOffset(0)})),B()}},V=()=>D(o.active),$=a=>{e.touchable&&(g.start(a),l=Date.now(),Y(),I())},q=a=>{e.touchable&&o.swiping&&(g.move(a),(M.value||g.offsetY.value>g.offsetX.value===e.vertical)&&W(a,e.stopPropagation),M.value&&T({offset:k.value}))},F=()=>{if(e.touchable&&o.swiping){var a=Date.now()-l,t=k.value/a;if((Math.abs(t)>.25||Math.abs(k.value)>x.value/2)&&M.value){var i=e.vertical?g.offsetY.value:g.offsetX.value,s=0;s=e.loop?i>0?k.value>0?-1:1:0:-Math[k.value>0?"ceil":"floor"](k.value/x.value),T({pace:s,emitChange:!0})}else k.value&&T({pace:0});o.swiping=!1,B()}},G=(a,t)=>{var l=t===z.value,i=l?{backgroundColor:e.indicatorColor}:void 0;return w("i",{style:i,class:ee("indicator",{active:l})},null)};return N({prev:()=>{I(),g.reset(),H((()=>{o.swiping=!1,T({pace:-1,emitChange:!0})}))},next:X,state:o,resize:V,swipeTo:function(a,t){void 0===t&&(t={}),I(),g.reset(),H((()=>{var l;l=e.loop&&a===y.value?0===o.active?0:a:a%y.value,t.immediate?H((()=>{o.swiping=!1})):o.swiping=!1,T({pace:l-o.active,emitChange:!0})}))}}),b({size:x,props:e,count:y,activeIndicator:z}),c((()=>e.initialSwipe),(e=>D(+e))),c(y,(()=>D(o.active))),c((()=>e.autoplay),B),c([E,A],V),c(R(),(e=>{"visible"===e?B():Y()})),p(D),f((()=>D(o.active))),Q((()=>D(o.active))),h(Y),d(Y),()=>w("div",{ref:r,class:ee()},[w("div",{style:P.value,class:ee("track",{vertical:e.vertical}),onTouchstart:$,onTouchmove:q,onTouchend:F,onTouchcancel:F},[null==s.default?void 0:s.default()]),s.indicator?s.indicator({active:z.value}):e.showIndicators&&y.value>1?w("div",{class:ee("indicators",{vertical:e.vertical})},[Array(y.value).fill("").map(G)]):void 0])}})),[ie,se]=V("swipe-item"),re=G(o({name:ie,setup(e,a){var t,{slots:l}=a,i=v({offset:0,inited:!1,mounted:!1}),{parent:s,index:r}=J(te);if(s){var o=n((()=>{var e={},{vertical:a}=s.props;return s.size.value&&(e[a?"height":"width"]=s.size.value+"px"),i.offset&&(e.transform="translate"+(a?"Y":"X")+"("+i.offset+"px)"),e})),u=n((()=>{var{loop:e,lazyRender:a}=s.props;if(!a||t)return!0;if(!i.mounted)return!1;var l=s.activeIndicator.value,o=s.count.value-1,u=0===l&&e?o:l-1,v=l===o&&e?0:l+1;return t=r.value===l||r.value===u||r.value===v}));return p((()=>{g((()=>{i.mounted=!0}))})),N({setOffset:e=>{i.offset=e}}),()=>w("div",{class:se(),style:o.value},[u.value?null==l.default?void 0:l.default():null])}}}));const oe=["onClick"],ue={key:1,class:"tw-absolute tw-inset-0 tw-bg-white/25 tw-flex tw-items-center tw-justify-center"},ve=o({inheritAttrs:!1}),ne=o((ce=((e,a)=>{for(var t in a||(a={}))i.call(a,t)&&r(e,t,a[t]);if(l)for(var t of l(a))s.call(a,t)&&r(e,t,a[t]);return e})({},ve),pe={props:{url:null,active:{type:Boolean,default:!1},wrapperClass:{default:""}},setup(e){const a=e,t=u(),{playing:l,muted:i,onSourceError:s}=m(t,{src:a.url}),r=u(!1);s((()=>{r.value=!0}));const o=()=>{r.value||(l.value=!l.value)},v=()=>{i.value=!i.value};return p((()=>{i.value=!0,c((()=>a.active),(e=>{l.value=e}))})),(a,s)=>{const u=M,n=P,c=S,p=T;return b(),y("div",{class:z(["tw-relative tw-text-white",e.wrapperClass]),onClick:o},[x("video",k({ref_key:"video",ref:t,class:"tw-w-full tw-h-full tw-bg-slate-300","object-fit":"cover"},a.$attrs),null,16),C(l)?(b(),y("a",{key:0,class:"tw-absolute tw-right-2 tw-bottom-2",onClick:O(v,["prevent","stop"])},[C(i)?(b(),j(u,{key:0,size:"18"})):(b(),j(n,{key:1,size:"18"}))],8,oe)):(b(),y("div",ue,[r.value?(b(),j(c,{key:0,size:"32"})):(b(),j(p,{key:1,size:"32"}))]))],2)}}},a(ce,t(pe))));var ce,pe;const fe={class:"tw-absolute tw-px-2 tw-left-1/2 tw--translate-x-1/2 tw-bottom-2 tw-text-sm tw-text-white tw-text-center"},he={key:1,class:"tw-w-full tw-h-[320px] tw-bg-light"},de=o({props:{items:{default:()=>[]}},setup(e){const a=e,t=u(0),l=e=>{t.value=e},i=n((()=>a.items.slice(0,9))),s=n((()=>i.value.length));return(a,r)=>{const o=ne,u=D,v=re,n=le;return e.items.length?(b(),j(n,{key:0,onChange:l},{indicator:I((({active:e})=>[x("div",fe,X(e+1)+"/"+X(C(s)),1)])),default:I((()=>[(b(!0),y(B,null,Y(C(i),((e,a)=>(b(),j(v,{key:e.url},{default:I((()=>[e.isVideo?(b(),j(o,{key:0,"wrapper-class":"tw-w-full tw-h-[320px]",url:e.url,active:t.value===a,crossorigin:"anonymous"},null,8,["url","active"])):(b(),j(u,{key:1,class:"tw-w-full tw-h-[320px]",src:e.url,fit:"cover"},null,8,["src"]))])),_:2},1024)))),128))])),_:1})):(b(),y("div",he))}}});export{de as _};
