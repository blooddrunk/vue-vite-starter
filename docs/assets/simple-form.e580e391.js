var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,o=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,i=(e,t)=>{for(var a in t||(t={}))s.call(t,a)&&o(e,a,t[a]);if(r)for(var a of r(t))n.call(t,a)&&o(e,a,t[a]);return e},l=(e,r)=>t(e,a(r));import{ax as u,l as d,n as c,ay as m,d as p,o as f,c as v,w as y,L as b,aq as w,az as g,E as P,aA as h,aB as _,ar as x,as as j,f as S,a as q,b as E,a8 as L,F as O,aC as k,aD as $,at as A,aE as D,aF as F,aG as T,ac as I,e as V,g as z,aj as B,aH as N,aI as R,aJ as C,a6 as G,aK as U}from"./vendor.cae3e354.js";import{a as H,_ as J}from"./BaseInput.8bf185c2.js";import{_ as K}from"./index.a2230fa5.js";import{u as M}from"./useAxios.7bef570f.js";import{a as W}from"./index.4a907a91.js";import"./useFormField.4fd7f0e2.js";const Q=p({props:{action:null,confirmText:{default:""},size:{default:"mini"},type:{default:"text"},plain:{type:Boolean,default:!1}},setup(e){const t=e,{isPending:a,execute:r}=((e,t,a={})=>{const r=u(t),s=d(!1),n=d(!1),o=d(null),i=c((()=>n.value&&!o.value)),{immediate:l=!1,onError:p=m,resetOnExecute:f=!0}=a,v=async(...a)=>{f&&(r.value=t),s.value=!0,n.value=!1,o.value=null;const i="function"==typeof e?e(...a):e;try{const e=await i;return r.value=e,e}catch(l){console.error(l),o.value=l,p(l)}finally{s.value=!1,n.value=!0}};return l&&v(),{data:r,isPending:s,isFinished:n,isSuccessful:i,error:o,execute:v}})(t.action,null),s=async()=>{if(t.confirmText)try{await g.confirm(t.confirmText,"提示",{type:"warning"}),r()}catch(e){}else r()};return(t,r)=>{const n=P;return f(),v(n,{loading:b(a),disabled:b(a),size:e.size,type:e.type,plain:e.plain,onClick:s},{default:y((()=>[b(a)?w(t.$slots,"loading",{key:0}):w(t.$slots,"default",{key:1})])),_:3},8,["loading","disabled","size","type","plain"])}}}),X=p({inheritAttrs:!1}),Y=p(l(i({},X),{props:{items:null},setup(e){const t=e;return(e,a)=>{const r=h,s=_,n=H;return f(),v(n,x(j(e.$attrs)),{default:y((e=>[S(s,x(j(e)),{default:y((()=>[(f(!0),q(O,null,E(t.items,(e=>(f(),v(r,L({key:e.value},e),null,16)))),128))])),_:2},1040)])),_:1},16)}}})),Z=p({inheritAttrs:!1}),ee=p(l(i({},Z),{props:{items:null},setup(e){const t=e;return(e,a)=>{const r=k,s=$,n=H;return f(),v(n,x(j(e.$attrs)),{default:y((e=>[S(s,x(j(e)),{default:y((()=>[(f(!0),q(O,null,E(t.items,(e=>(f(),v(r,L({key:e.value},e),null,16)))),128))])),_:2},1040)])),_:1},16)}}}));var te=K(p({inheritAttrs:!1}),[["render",function(e,t,a,r,s,n){const o=D,i=H;return f(),v(i,x(j(e.$attrs)),{default:y((t=>[S(o,x(j(t)),A({_:2},[E(e.$slots,((t,a)=>({name:a,fn:y((()=>[w(e.$slots,a)]))})))]),1040)])),_:3},16)}]]);const ae=p({inheritAttrs:!1}),re=p(l(i({},ae),{setup:e=>(e,t)=>{const a=F,o=H;return f(),v(o,x(j(e.$attrs)),{default:y((t=>{var o=t,{modelValue:i}=o,l=((e,t)=>{var a={};for(var o in e)s.call(e,o)&&t.indexOf(o)<0&&(a[o]=e[o]);if(null!=e&&r)for(var o of r(e))t.indexOf(o)<0&&n.call(e,o)&&(a[o]=e[o]);return a})(o,["modelValue"]);return[S(a,L({"model-value":b(T)(i)},l),A({_:2},[E(e.$slots,((t,a)=>({name:a,fn:y((()=>[w(e.$slots,a)]))})))]),1040,["model-value"])]})),_:3},16)}})),se=p({name:"ProductForm",props:{addProduct:{type:Function,required:!0}},emits:{submit:null},setup(e){const{meta:t,isSubmitting:a,handleSubmit:r,resetForm:s}=I({validationSchema:{name:"required|min:5|max:10",price:"required|numeric|min_value:1|max_value:9999999",inventory:"required",terms:"required",tags:"required",location:"required"},initialValues:{name:"233",price:1,inventory:1,terms:!1,tags:["book"],location:""}}),n=c((()=>!t.value.valid&&t.value.dirty)),o=r((async t=>{await e.addProduct(t)}));return{tagList:d([{label:"Phone",value:"phone"},{label:"Book",value:"book"}]),locationList:d([{label:"UP",value:"up"},{label:"DOWN",value:"down"}]),invalid:n,isSubmitting:a,onSubmit:o,onReset:e=>{e.preventDefault(),s()}}}}),ne={class:"tw-max-w-lg tw-p-3 tw-shadow-md"},oe=V("h1",{class:"tw-py-2 tw-text-semibold tw-text-xl tw"},"Enter Product",-1),ie=V("span",{class:"tw-text-teal-600"},"Product Name",-1),le=V("span",{class:"tw-text-blue-600"},"Price",-1),ue=z(" $ "),de=z("1` "),ce=z(" Agree to terms and conditions "),me={class:"tw-flex tw-justify-end tw-py-3"},pe=z("RESET"),fe=z(" SUBMIT ");var ve=K(se,[["render",function(e,t,a,r,s,n){const o=J,i=re,l=te,u=ee,d=Y,c=P,m=B;return f(),q("div",ne,[oe,S(m,{"status-icon":"",onSubmit:e.onSubmit,onReset:e.onReset},{default:y((()=>[S(o,{name:"name",label:"Product Name",required:""},{label:y((()=>[ie])),_:1}),S(o,{name:"price",label:"Price",required:""},{label:y((()=>[le])),prepend:y((()=>[ue])),_:1}),S(i,{class:"tw-w-full",name:"inventory",label:"Inventory",required:"","controls-position":"right",min:0,max:9999,precision:0},{default:y((()=>[de])),_:1}),S(l,{name:"terms",label:"Terms","show-label":!1,required:""},{default:y((()=>[ce])),_:1}),S(u,{name:"tags",label:"Tags",items:e.tagList},null,8,["items"]),S(d,{name:"location",label:"Location",items:e.locationList,clearable:"",placeholder:"Location"},null,8,["items"]),V("div",me,[S(c,{"native-type":"reset"},{default:y((()=>[pe])),_:1}),S(c,{type:"primary","native-type":"submit",loading:e.isSubmitting,disabled:e.invalid||e.isSubmitting},{default:y((()=>[fe])),_:1},8,["loading","disabled"])])])),_:1},8,["onSubmit","onReset"])])}]]),ye={};const be=p({name:"SimpleFormView",setup(){const{products:e,isProductLoading:t,addProduct:a,removeProduct:r}=(()=>{const{data:e,isPending:t,request:a}=M([],{url:"https://my-json-server.typicode.com/blooddrunk/my-json-server/products",__needValidation:!1});return{products:e,isProductLoading:t,addProduct:async t=>{try{const{data:a}=await W.request({url:"https://my-json-server.typicode.com/blooddrunk/my-json-server/products",method:"post",data:t,__needValidation:!1});e.value.unshift(a)}catch(a){console.error(a),U.error(a.message)}},removeProduct:async t=>{if(t.id)try{await W.delete(`https://my-json-server.typicode.com/blooddrunk/my-json-server/products/${t.id}`,{__needValidation:!1}),e.value=e.value.filter((e=>e.id!==t.id))}catch(a){console.error(a),U.error(a.message)}},fetchProducts:a}})();return{products:e,isProductLoading:t,addProduct:a,getDeleteAction:e=>async()=>{await r(e),U.success("Deleted successfully")}}}}),we=z(" DELETE "),ge=z(" DELETING... ");"function"==typeof ye&&ye(be);var Pe=K(be,[["render",function(e,t,a,r,s,n){const o=ve,i=N,l=Q,u=R,d=C;return f(),q("section",null,[S(o,{"add-product":e.addProduct},null,8,["add-product"]),G((f(),v(u,{class:"tw-mt-3",data:e.products,"row-key":"id"},{default:y((()=>[S(i,{prop:"id",label:"ID",width:"100"}),S(i,{prop:"name",label:"Product Name"}),S(i,{prop:"price",label:"Product Price",width:"200"}),S(i,{prop:"inventory",label:"Inventory",width:"100"}),S(i,{label:"Action",width:"200"},{default:y((t=>[S(l,{type:"danger",action:e.getDeleteAction(t.row),"confirm-text":"Are you sure?"},{loading:y((()=>[ge])),default:y((()=>[we])),_:2},1032,["action"])])),_:1})])),_:1},8,["data"])),[[d,e.isProductLoading]])])}]]);export{Pe as default};
