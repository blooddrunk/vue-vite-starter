var e=Object.defineProperty,r=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(r,t,a)=>t in r?e(r,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[t]=a,i=(e,r)=>{for(var t in r||(r={}))o.call(r,t)&&l(e,t,r[t]);if(a)for(var t of a(r))s.call(r,t)&&l(e,t,r[t]);return e};import{_ as n}from"./PageFooter.c2f40ea0.js";import{n as d,aX as m,L as c,af as u,ae as p,d as f,l as b,bl as j,r as v,o as g,a as y,c as O,f as w,w as x,e as I,t as h,g as k}from"./vendor.e60456f3.js";import{C as P}from"./index.7e4216b6.js";import{C as _}from"./index.a8ff1419.js";import{C}from"./index.0eef1764.js";import{F as A}from"./index.b20c409a.js";import{_ as S}from"./CartList.a332858b.js";import{E as V}from"./index.ad89b4c6.js";import{u as E}from"./product.65deb8b7.js";import{u as q}from"./index.aa52fcaa.js";import{u as L}from"./order.b151e58e.js";import{B}from"./index.e74be4f5.js";import"./index.a9a156c1.js";import"./index.84f5d824.js";import"./on-popup-reopen.d93741ed.js";import"./CartItem.6d9b22ca.js";import"./index.aa76e96d.js";import"./function-call.7be5e6a9.js";import"./interceptor.f210eca8.js";import"./product.c7441195.js";import"./usePaginatedList.9bed8c28.js";import"./index.9bc79dd0.js";import"./useAxios.d5dc9735.js";import"./math.c4a34419.js";var D=Object.defineProperty,F=Object.defineProperties,U=Object.getOwnPropertyDescriptors,$=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,X=(e,r,t)=>r in e?D(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,G=(e,r)=>{for(var t in r||(r={}))z.call(r,t)&&X(e,t,r[t]);if($)for(var t of $(r))T.call(r,t)&&X(e,t,r[t]);return e};var H={};const J={class:"tw-article tw-article_has-footer"},K=k(" ￥ "),M={class:"tw-font-semibold"},N=I("span",null,[k(" ￥ "),I("strong",{class:"tw-font-semibold"}," -- ")],-1),Q=k(" 我已认真阅读并同意 "),R=k(" 《服务协议》 "),W=k(" 合计： ￥ "),Y={class:"tw-font-semibold"},Z=k(" 订单提交 "),ee=f({setup(e){var a,o;const s=function(e,r,{mode:t="replace",route:a=u(),router:o=p()}={}){return d({get(){const t=a.query[e];return null==t?null!=r?r:null:Array.isArray(t)?t.filter(Boolean):t},set(r){m((()=>{var s,l;o[c(t)]({query:(s=G({},a.query),l={[e]:r},F(s,U(l)))})}))}})}("productId"),l=E(),f=q(),k=L();l.isItemsEmpty&&l.getItems();const D=d((()=>s.value?l.items.find((e=>String(e.id)===s.value)):null)),$=d((()=>{return D.value?[(e=i({},D.value),a={quantity:1},r(e,t(a)))]:f.checkedItems;var e,a})),z=d((()=>!$.value.length&&!l.isItemsEmpty)),T=d((()=>D.value?D.value.price:f.checkedTotalPrice)),X=b(null!=(a=f.stagedOrderInfo.remarks)?a:""),H=b(null!=(o=f.stagedOrderInfo.isServiceAgreementChecked)&&o);return k.clearOrderInfo(),j((e=>{["mobile-service-agreement","mobile-address"].includes(e.name)?(f.$patch((e=>{e.stagedOrderInfo.remarks=X.value,e.stagedOrderInfo.isServiceAgreementChecked=H.value})),"mobile-address"===e.name&&k.updateOrderInfo({items:$.value})):f.$patch((e=>{e.stagedOrderInfo.remarks="",e.stagedOrderInfo.isServiceAgreementChecked=!1}))})),(e,r)=>{const t=V,a=S,o=A,s=C,i=_,d=v("router-link"),m=P,u=B,p=n;return g(),y("article",J,[c(z)?(g(),O(t,{key:0,image:"error",description:"出错了"})):(g(),O(a,{key:1,items:c($),loading:c(l).isItemsLoading,readonly:""},null,8,["items","loading"])),w(i,{class:"!tw-mt-6 !tw-mx-0",inset:""},{default:x((()=>[w(o,{modelValue:X.value,"onUpdate:modelValue":r[0]||(r[0]=e=>X.value=e),label:"订单备注",maxlength:"30",placeholder:"请填写备注信息（30字以内）"},null,8,["modelValue"]),w(s,{title:"商品金额"},{default:x((()=>[I("span",null,[K,I("strong",M,h(c(T)),1)])])),_:1}),w(s,{title:"配送+安装费"},{default:x((()=>[N])),_:1})])),_:1}),w(m,{modelValue:H.value,"onUpdate:modelValue":r[1]||(r[1]=e=>H.value=e),class:"tw-mt-6 tw-text-xs tw-justify-center","icon-size":"16px"},{default:x((()=>[Q,w(d,{class:"tw-text-primary",to:"/mobile/service-agreement"},{default:x((()=>[R])),_:1})])),_:1},8,["modelValue"]),w(p,null,{default:x((()=>[I("span",null,[W,I("strong",Y,h(c(T)),1)]),w(d,{custom:"",to:"/mobile/address"},{default:x((({navigate:e})=>[w(u,{class:"!tw-ml-auto",type:"primary",round:"",disabled:!H.value,onClick:e},{default:x((()=>[Z])),_:2},1032,["disabled","onClick"])])),_:1})])),_:1})])}}});"function"==typeof H&&H(ee);export{ee as default};
