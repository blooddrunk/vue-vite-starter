var e=Object.defineProperty,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,n=(a,r,l)=>r in a?e(a,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[r]=l;import{a as u}from"./index.ab5ea04f.js";import{ax as t,l as o,n as s,L as c,aL as v}from"./vendor.a4ef30fa.js";const i=(e,i,{immediate:p=!1,resetOnRequest:f=!0,onError:b}={})=>{const m=t(i),d=o(!1),y=o(!1),O=o(!1),j=o(null),g=o(),w=s((()=>y.value&&!j.value)),P=s((()=>{const e=c(j);return v(e)?e:null==e?void 0:e.message}));let h;const k=async t=>{const o=c(null!=t?t:c(e));f&&(m.value=i),h=u.CancelToken.source(),d.value=!0,y.value=!1,j.value=null;const s=u.request(((e,u)=>{for(var t in u||(u={}))r.call(u,t)&&n(e,t,u[t]);if(a)for(var t of a(u))l.call(u,t)&&n(e,t,u[t]);return e})({cancelToken:h.token},o));try{return g.value=await s,m.value=g.value.data,h=null,d.value=!1,y.value=!0,m.value}catch(v){console.error(v),j.value=v,d.value=!1,y.value=!0,u.isCancel(v)||(h=null,b&&b(v))}};return p&&k(),{isPending:d,isFinished:y,isSuccessful:w,error:j,errorMessage:P,data:m,response:g,request:k,cancel:e=>{y.value||h&&(h.cancel(e),O.value=!0,d.value=!1,y.value=!1)}}};export{i as u};
