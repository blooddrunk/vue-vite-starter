var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,r=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t;import{i as s,u as i,e as c,g as u,c as d,n as p,m as v,a as m,w as b,b as f,B as y,r as g,I as w}from"./index.aed4f604.js";import{d as x,n as h,f as S,l as _,aT as k,ab as B,o as C,a as P,e as j,L as z,a4 as $,aU as A,aq as O,a7 as T,a6 as V,aV as q,aW as E,t as F,g as L,p as D,aX as I,ac as M,aY as U,w as W}from"./vendor.64cb168e.js";import{u as X}from"./useFormField.f40b4de5.js";import{_ as Y}from"./index.1a71aba3.js";s();i();var[G,H]=d("loading"),J=Array(12).fill(null).map(((e,a)=>S("i",{class:H("line",String(a+1))},null))),K=S("svg",{class:H("circular"),viewBox:"25 25 50 50"},[S("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),N=b(x({name:G,props:{size:p,type:v("circular"),color:String,vertical:Boolean,textSize:p,textColor:String},setup(e,a){var{slots:l}=a,t=h((()=>c({color:e.color},u(e.size)))),o=()=>{var a;if(l.default)return S("span",{class:H("text"),style:{fontSize:m(e.textSize),color:null!=(a=e.textColor)?a:e.color}},[l.default()])};return()=>{var{type:a,vertical:l}=e;return S("div",{class:H([a,{vertical:l}])},[S("span",{class:H("spinner",a),style:t.value},["spinner"===a?J:K]),o()])}}})),[Q,R]=d("button"),Z=b(x({name:Q,props:c({},g,{tag:v("button"),text:String,icon:String,type:v("default"),size:v("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:v("button"),loadingSize:p,loadingText:String,loadingType:String,iconPosition:v("left")}),emits:["click"],setup(e,a){var{emit:l,slots:t}=a,o=f(),n=()=>e.loading?t.loading?t.loading():S(N,{size:e.loadingSize,type:e.loadingType,class:R("loading")},null):t.icon?S("div",{class:R("icon")},[t.icon()]):e.icon?S(w,{name:e.icon,class:R("icon"),classPrefix:e.iconPrefix},null):void 0,r=()=>{var a;if(a=e.loading?e.loadingText:t.default?t.default():e.text)return S("span",{class:R("text")},[a])},s=()=>{var{color:a,plain:l}=e;if(a){var t={color:l?a:"white"};return l||(t.background=a),a.includes("gradient")?t.border=0:t.borderColor=a,t}},i=a=>{e.loading?function(e,a){("boolean"!=typeof e.cancelable||e.cancelable)&&e.preventDefault(),a&&(e=>{e.stopPropagation()})(e)}(a):e.disabled||(l("click",a),o())};return()=>{var{tag:a,type:l,size:t,block:o,round:c,plain:u,square:d,loading:p,disabled:v,hairline:m,nativeType:b,iconPosition:f}=e,g=[R([l,t,{plain:u,block:o,round:c,square:d,loading:p,disabled:v,hairline:m}]),{[y]:m}];return S(a,{type:b,class:g,style:s(),disabled:v,onClick:i},{default:()=>[S("div",{class:R("content")},["left"===f&&n(),r(),"right"===f&&n()])]})}}}));var ee={input:"_input_rxpxd_2",control:"_control_rxpxd_5",controlActive:"_controlActive_rxpxd_29",labelActive:"_labelActive_rxpxd_42"};const ae=["for"],le=["id","type","placeholder"],te={key:1,class:"tw-ml-auto tw-pl-1 tw-flex-shrink-0"},oe={key:0,class:"tw-absolute tw-top-full tw-left-0"},ne={class:"tw-px-2 tw-text-xs tw-text-red-500 tw-font-medium tw-leading-none"},re=x({inheritAttrs:!1}),se=x((ie=((e,a)=>{for(var l in a||(a={}))o.call(a,l)&&r(e,l,a[l]);if(t)for(var l of t(a))n.call(a,l)&&r(e,l,a[l]);return e})({},re),ce={props:{name:null,label:{default:""},showLabel:{type:Boolean,default:!1},type:{default:"text"},inputmode:{default:"text"},modelValue:{default:""},placeholder:{default:""},showValidationError:{type:Boolean,default:!0}},emits:["focus","blur","change","update:modelValue"],setup(e,{emit:a}){const l=e,t=_(null),o=k(),n=h((()=>!(!o.label&&!l.label))),{listeners:r,errorMessage:s,value:i,meta:c}=X({name:l.name,label:l.label}),u=_(!1),d=()=>{u.value=!0,a("focus")},p=e=>{r.value.onBlur(e),u.value=!1,a("blur")};B((()=>{a("change",i.value)}));const v=h((()=>u.value||c.dirty&&i.value||l.placeholder));return(a,l)=>(C(),P("div",{class:$([a.$style.input,e.showValidationError&&"tw-relative tw-mb-4"])},[j("div",{class:$({[a.$style.control]:!0,[a.$style.controlActive]:u.value})},[e.showLabel&&z(n)?(C(),P("label",{key:0,class:$({[a.$style.labelActive]:z(v)}),for:e.name,onClick:l[0]||(l[0]=e=>t.value.focus()),onTouchstart:l[1]||(l[1]=A((e=>t.value.focus()),["stop"]))},[O(a.$slots,"label",{},(()=>[j("span",null,F(e.label),1)]))],42,ae)):T("",!0),V(j("input",{id:e.name,ref_key:"input",ref:t,"onUpdate:modelValue":l[2]||(l[2]=e=>E(i)?i.value=e:null),type:e.type,placeholder:e.placeholder,onFocus:d,onBlur:p},null,40,le),[[q,z(i)]]),a.$slots.append?(C(),P("div",te,[O(a.$slots,"append")])):T("",!0)],2),e.showValidationError&&z(s)?(C(),P("p",oe,[j("span",ne,[O(a.$slots,"error",{error:z(s)},(()=>[L(F(z(s)),1)]))])])):T("",!0)],2))}},a(ie,l(ce))));var ie,ce;const ue={};ue.$style=ee;var de=Y(se,[["__cssModules",ue]]);var pe={};const ve={class:"tw-h-screen tw-pt-[15vh] tw-px-8"},me=j("header",null,[j("h3",{class:"tw-py-3 tw-text-2xl tw-font-bold"},"手机快捷登录"),j("p",{class:"tw-text-sm tw-text-light"},"未注册过的手机号将自动创建账号")],-1),be=["onClick"],fe={class:"tw-mt-16 tw-text-center"},ye=L("登录"),ge=x({setup(e){const{values:a,validateField:l,meta:t,isSubmitting:o,handleSubmit:n}=M({validationSchema:{mobile:"required|mobile",authCode:"required|numeric|max:6"},initialValues:{mobile:"",authCode:""}}),r=_(10),{isActive:s,pause:i,resume:c}=U((()=>{r.value--,r.value<=0&&i()}),1e3,{immediate:!1,immediateCallback:!0}),u=h((()=>s.value?`${r.value}s后重新获取`:"获取验证码")),d=async()=>{const{valid:e}=await l("mobile");e&&(s.value||(r.value=10,await(async e=>(console.log(e),await D(1e3),I(1e3)))(a.mobile),c()))};return h((()=>!t.value.valid&&t.value.dirty)),(e,a)=>{const l=de,t=Z;return C(),P("article",ve,[me,j("form",{class:"tw-mt-12",onSubmit:a[0]||(a[0]=A((()=>{}),["prevent"]))},[S(l,{name:"mobile",label:"手机号",inputmode:"text",placeholder:"请输入手机号"}),S(l,{name:"authCode",label:"验证码",inputmode:"text",placeholder:"请输入验证码"},{append:W((()=>[j("a",{class:$(z(s)?"tw-text-slate-400/75":"tw-text-primary"),onClick:A(d,["prevent"])},F(z(u)),11,be)])),_:1}),j("div",fe,[S(t,{class:"tw-w-11/12",type:"primary",round:""},{default:W((()=>[ye])),_:1})])],32)])}}});"function"==typeof pe&&pe(ge);export{ge as default};
