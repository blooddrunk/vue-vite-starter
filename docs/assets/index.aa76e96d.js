import{j as a,i as r,O as o,c as e,n as s,t as l,m as i,I as n,w as d}from"./index.84f5d824.js";import{d as t,l as u,aU as v,n as c,ag as f,b0 as g,f as h,a6 as m,a3 as p,a8 as w}from"./vendor.e60456f3.js";var[y,z]=e("image"),x=d(t({name:y,props:{src:String,alt:String,fit:String,round:Boolean,width:s,height:s,radius:s,lazyLoad:Boolean,iconSize:s,showError:l,errorIcon:i("photo-fail"),iconPrefix:String,showLoading:l,loadingIcon:i("photo")},emits:["load","error"],setup(e,s){var{emit:l,slots:i}=s,d=u(!1),t=u(!0),y=u(),{$Lazyload:x}=v().proxy,I=c((()=>{var o={width:a(e.width),height:a(e.height)};return r(e.radius)&&(o.overflow="hidden",o.borderRadius=a(e.radius)),o}));f((()=>e.src),(()=>{d.value=!1,t.value=!0}));var L=a=>{t.value=!1,l("load",a)},S=a=>{d.value=!0,t.value=!1,l("error",a)},$=(a,r,o)=>o?o():h(n,{name:a,size:e.iconSize,class:r,classPrefix:e.iconPrefix},null),j=()=>{if(!d.value&&e.src){var a={alt:e.alt,class:z("img"),style:{objectFit:e.fit}};return e.lazyLoad?m(h("img",w({ref:y},a),null),[[p("lazy"),e.src]]):h("img",w({src:e.src,onLoad:L,onError:S},a),null)}},b=a=>{var{el:r}=a;r===y.value&&t.value&&L()},E=a=>{var{el:r}=a;r!==y.value||d.value||S()};return x&&o&&(x.$on("loaded",b),x.$on("error",E),g((()=>{x.$off("loaded",b),x.$off("error",E)}))),()=>h("div",{class:z({round:e.round}),style:I.value},[j(),t.value&&e.showLoading?h("div",{class:z("loading")},[$(e.loadingIcon,z("loading-icon"),i.loading)]):d.value&&e.showError?h("div",{class:z("error")},[$(e.errorIcon,z("error-icon"),i.error)]):void 0,null==i.default?void 0:i.default()])}}));export{x as I};
